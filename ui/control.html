<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self'; frame-src 'self' file:">
    <title>Broadcast Control Panel</title>
    <link rel="stylesheet" href="control.css">
</head>
<body>
<div class="app-layout">

    <!-- Sidebar -->
    <div class="sidebar">
        <div class="app-header">
            <div class="accent">BROADCAST</div>
            <div class="title">GRAPHICS</div>
        </div>

        <!-- Library -->
        <div class="sidebar-section">
            <div class="section-label">LIBRARY</div>
            <ul id="lstTemplates" class="list-box"></ul>
        </div>

        <!-- Rundown -->
        <div class="sidebar-section">
            <div class="rundown-toolbar">
                <span class="section-label">RUNDOWN</span>
                <button class="btn-icon" id="btnSaveRundown" title="Save Rundown">&#128190;</button>
                <button class="btn-icon" id="btnLoadRundown" title="Load Rundown">&#128194;</button>
            </div>
            <ul id="lstRundown" class="list-box"></ul>
            <div class="sidebar-toolbar">
                <button class="btn btn-icon-text" id="btnMoveUp" title="Move Up" aria-label="Move Up" disabled>&#9650;</button>
                <button class="btn btn-icon-text" id="btnMoveDown" title="Move Down" aria-label="Move Down" disabled>&#9660;</button>
                <button class="btn" id="btnRenameRundown" disabled>Rename</button>
                <button class="btn btn-danger" id="btnRemoveRundown" disabled>Remove</button>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="content-area">
        <div class="tab-bar">
            <button class="tab-btn active" data-tab="editor">EDITOR</button>
            <button class="tab-btn" data-tab="settings">SETTINGS</button>
        </div>

        <!-- Editor Tab -->
        <div class="tab-content active" id="tab-editor">
            <div class="editor-layout">
                <!-- Active Graphics -->
                <div class="card active-list">
                    <div class="section-label">ACTIVE GRAPHICS</div>
                    <ul id="lstActiveGraphics" class="list-box"></ul>
                </div>

                <!-- Preview -->
                <div class="preview-card">
                    <span class="preview-label">PREVIEW</span>
                    <iframe id="previewFrame"></iframe>
                </div>

                <!-- Action Bar -->
                <div class="action-bar">
                    <button class="btn" id="btnClearPreview">Clear Preview</button>
                    <button class="btn btn-accent" id="btnSaveAsRundown">Save Preview as Rundown</button>
                </div>

                <!-- Properties -->
                <div class="card properties-panel" id="pnlProperties">
                    <div class="section-label">PROPERTIES</div>
                    <p style="color: var(--text-secondary); font-style: italic; text-align: center; margin-top: 16px; font-size: 13px;">
                        Select a graphic to edit
                    </p>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div class="tab-content" id="tab-settings">
            <div class="settings-panel">
                <div class="card">
                    <h2>OUTPUT SETTINGS</h2>
                    <div class="settings-row">
                        <label><input type="checkbox" id="chkLumaKey"> Use Luma Key (Black Background)</label>
                    </div>
                    <div class="settings-row">
                        <label>Target Monitor:</label>
                        <select id="cboMonitors"></select>
                        <button class="btn" id="btnMoveOutput">Move Output</button>
                    </div>
                </div>

                <div class="card">
                    <h2>THEME SETTINGS</h2>
                    <div class="settings-row">
                        <label>Preset:</label>
                        <select id="cboThemePresets">
                            <option value="custom">Custom</option>
                            <option value="microsoft">Microsoft (Blue/Grey)</option>
                            <option value="broadcast" selected>Broadcast (Dark Blue/Gold)</option>
                            <option value="sports">Sports (Red/White)</option>
                        </select>
                    </div>
                    <div class="color-group">
                        <div class="color-field">
                            <label>Primary Color</label>
                            <div class="color-input-pair">
                                <input type="color" id="colorPrimary" value="#00008B">
                                <input type="text" id="txtPrimaryColor" value="#00008B" style="width:80px;">
                            </div>
                        </div>
                        <div class="color-field">
                            <label>Secondary Color</label>
                            <div class="color-input-pair">
                                <input type="color" id="colorSecondary" value="#FFD700">
                                <input type="text" id="txtSecondaryColor" value="#FFD700" style="width:80px;">
                            </div>
                        </div>
                        <div class="color-field">
                            <label>Text Color</label>
                            <div class="color-input-pair">
                                <input type="color" id="colorText" value="#FFFFFF">
                                <input type="text" id="txtTextColor" value="#FFFFFF" style="width:80px;">
                            </div>
                        </div>
                    </div>
                    <div style="margin-top:12px; text-align:right;">
                        <button class="btn btn-accent" id="btnApplyTheme">Apply Theme to Graphics</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
        <span id="txtOutputStatus">Output: Connected</span>
        <span class="sep"></span>
        <span id="txtApiStatus">API: Port 8080</span>
        <span class="sep"></span>
        <span id="txtMonitorCount">Monitors: 1</span>
        <span class="hint">Space=Toggle | 1-9=Quick Play</span>
    </div>
</div>

<script src="control.js"></script>
</body>
</html>
